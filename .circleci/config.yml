version: 2.1
setup: true
orbs:
  path-filtering: circleci/path-filtering@0.1.6 # Dynamic config must be enabled. See https://circleci.com/docs/2.0/dynamic-config
  hmpps: ministryofjustice/hmpps@7

parameters:
  alerts-slack-channel:
    type: string
    default: syscon-alerts

workflows:
  check-for-changes:
    jobs:
      - path-filtering/filter:
          name: check-for-changes
          mapping: |
            (model/.*|hmpps-prisoner-search/.*) workflow-directory "hmpps-prisoner-search"
            (model/.*|hmpps-prisoner-search-indexer.*) workflow-directory "hmpps-prisoner-search-indexer"
